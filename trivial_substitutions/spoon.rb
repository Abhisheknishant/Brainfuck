#!/usr/bin/ruby
eval 'm=Hash.new(p=0);'+ARGF.read.gsub(/[^01]/,'').gsub(
        /1|000|01.|0011|00101111|00101*0/,
        '1' => 'm[p]+=1;',
        '000' => 'm[p]-=1;',
        '010' => 'p+=1;',
        '011' => 'p-=1;',
        '0011' => ')while(m[p]!=0);',
        '00100' => '(',
        '001010' => 'putc m[p];',
        '0010110' => 'm[p]=STDIN.getbyte if !STDIN.eof;',
        '00101110' => 'print "(p=",p,",m=",m,")\n";',
        '00101111' => 'exit;'
        )
